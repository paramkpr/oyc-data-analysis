import geopandas as gpd
import matplotlib.pyplot as plt
import descartes
import pgeocode
import pandas as pd

pincodes = [180015, 700011, 122002, 781028, 400080, 752031, 452001, 122101, 600116, 122101, 673006, 122101, 122002, 122101, 122101, 122101, 247667, 140507, 440004, 442001, 122101, 122101, 122101, 122101, 122101, 122101, 122101, 122101, 122101, 122101, 122101, 122101, 122101, 122101, 122101, 122101, 122101, 122101, 122101, 110064, 682301, 462016, 522034, 400005, 400005, 396001, 121007, 576104, 110070, 110075, 201301, 831006, 500081, 132001, 201304, 110003, 752031, 752031, 122101, 122002, 122002, 474007, 110052, 576104, 842001, 390014, 400005, 712248, 440026, 389151, 201005, 201005, 411046, 575014, 500035, 333001, 500035, 462023, 122101, 122101, 561203, 400071, 472001, 110086, 203001, 410203, 520013, 400101, 410405, 560061, 410203, 122101, 122002, 121010, 422013, 560017, 122002, 400101, 122002, 560064, 122002, 176052, 670006, 302005, 400014, 302004, 122002, 411002, 500026, 400013, 752101, 400064, 140401, 400080, 122001, 122002, 110009, 400701, 600010, 122001, 122002, 122002, 110005, 243122, 121010, 411028, 400701, 737102, 122009, 122001, 410218, 122101, 400056, 122018, 600102, 400083, 400601, 390021, 410203, 121010, 362001, 711204, 415103, 121007, 400606, 500016, 793004, 110016, 500062, 122003, 781001, 400080, 700055, 793001, 122009, 110072, 122002, 121010, 495445, 500018, 533124, 122003, 590005, 122001, 382002, 600089, 110010, 400101, 400708, 122001, 452001, 500026, 500026, 122002, 700055, 700107, 248001, 122001, 122001, 110031, 122009, 793017, 700025, 110029, 122002, 122002, 560098, 122007, 400709, 506011, 576101, 560017, 781001, 248195, 606304, 737102, 121002, 422013, 122018, 788724, 122002, 122101, 110068, 560017, 530002, 248001, 600018, 122002, 560063, 560072, 600084, 311001, 110048, 825301, 122002, 122002, 122001, 110060, 122017, 110003]
data = {'latitude': [], 'longitude': []}
nomi = pgeocode.Nominatim('in')

for code in pincodes:
    query = nomi.query_postal_code(str(code))
    data['latitude'].append(query.latitude)
    data['longitude'].append(query.longitude)

df = pd.DataFrame(data)
BBox = (df.longitude.min(),   df.longitude.max(),      
         df.latitude.min(), df.latitude.max())
print(df.head())
print(BBox)

gdf = gpd.GeoDataFrame(
    df, geometry=gpd.points_from_xy(df.longitude, df.latitude))
print(gdf.head)

india = gpd.read_file('india_administrative_state_boundary/india_administrative_state_boundary.shp')
ax = india.plot(color='white', edgecolor='black')
gdf.plot(ax=ax, color='red')
plt.show()
